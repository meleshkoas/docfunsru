### Git. Расширенные возможности

### Система контроля версий

презентация.pptx
презентация(копия).pptx
презентация(копия)(копия)_2.pptx
презентация(копия)(копия)_2(копия).pptx
презентация(финал).pptx
презентация(финал2).pptx

### Распределенная система контроля версий

* То же самое, только на кучу народу
* Как не запутаться?
* Как распутаться?

### При чем здесь Linux

*Использовать Linux — это как жить в доме с большой семьей плотников и архитекторов. Каждое утро, когда вы просыпаетесь — ваш дом выглядит немножко иначе. Появляется новая башенка, на полметра сдвигается стена. Или кто-то на некоторое время убирает из-под вашей кровати пол.*

— Rob Riggs, разработчик и тестировщик Linux

### Git

Git — это **распределённая система контроля версий**, которая фиксирует изменения в файлах (**commit**), позволяет параллельно работать в ветках (**branch**), объединять результаты (**merge**), возвращаться к любым состояниям проекта (**checkout**, **revert**) и совместно работать над кодом через локальные и удаленные репозитории.

### Локальные и удаленные репозитории

* Локальные репозитории хранятся локально
* Удаленные -- удаленно

Локальный репозиторий условно содержит три слоя:

* Рабочая директория
* Staging area (подготовительная область)
* Локальная ветка

### Локальные и удаленные репозитории

* Локальные репозитории хранятся локально
* Удаленные -- удаленно *(вау!)*

Локальный репозиторий условно содержит три слоя:

* Рабочая директория
* Staging area (подготовительная область)
* Локальная ветка

### Минимальный воркфлоу

``` bash
# Свой репозиторий или есть права
git clone https://github.com/abc/def.git 
# что-то кодим и коммтитим
# git add *
# git commit -m "Initial Commit"
git push
```

### Origin, Upstream

``` bash
git remote add origin git@github.com:abc/def.git
git pull
# что-то кодим и коммтитим
git push -u origin main   # назначает upstream-ветку: origin/main
```

* origin — удаленный репозиторий по умолчанию (и `pull`, и `push`).
* upstream — ветка, которую отслеживает текущая (здесь: `origin/main`).
  * имеет значение, когда `pull` из одного источника, а `push` в другой

### Добавление фичи

* Фича состоит из нескольких коммитов
* Главный репозиторий много кто использует:
  * Не хочется пихать сырые вещи кусками
  * Не хочется делать один огромный коммит

Чтобы не пихать огромный коммит или несколько мелких в main, создаем ветку

### Branch -- ветки

``` bash
git branch feature/advantage
git branch
git switch feature/advantage
```

### Checkout, Reset, Revert

``` bash
git checkout [branch] # Загружает версию коммита
git switch [branch] # Загружает версию коммита

git revert HEAD~2 # Делает обратные коммиты

### НИКОГДА НЕ ИСПОЛЬЗУЙТЕ ###
git reset HEAD~2 # Уничтожает старые коммиты
```

### Fork -- вилки

``` bash
git clone git@github.com:my_clone_of_abc/def.git        
# ваш форк — куда push
git remote add upstream https://github.com/abc/def.git  
# оригинал — откуда fetch
git fetch upstream
# что-то кодим и коммтитим
git merge upstream/main
git push
```